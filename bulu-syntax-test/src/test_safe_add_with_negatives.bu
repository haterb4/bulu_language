// Test de safeAdd avec nombres négatifs

struct Calculator {
    value: float64
    
    priv func validateInput(x: float64): bool {
        println("validateInput appelé avec x = " + x.toString())
        return x >= 0.0
    }
    
    pub func add(x: float64): float64 {
        println("add appelé avec x = " + x.toString())
        return this.value + x
    }
    
    pub func getValue(): float64 {
        return this.value
    }
    
    pub func safeAdd(x: float64): float64 {
        println("safeAdd appelé avec x = " + x.toString())
        
        if this.validateInput(x) {
            println("Validation réussie, appel de add")
            return this.add(x)
        } else {
            println("Validation échouée, retour de value")
            return this.getValue()
        }
    }
}

func main() {
    println("=== Test SafeAdd avec Nombres Négatifs ===")
    
    let calc = Calculator{value: 10.0}
    println("Calculator créé avec value = 10.0")
    
    // Test avec nombre positif
    let result1 = calc.safeAdd(3.0)
    println("safeAdd(3.0): " + result1.toString())
    
    // Test avec nombre négatif
    let result2 = calc.safeAdd(-5.0)
    println("safeAdd(-5.0): " + result2.toString())
    
    // Test avec zéro
    let result3 = calc.safeAdd(0.0)
    println("safeAdd(0.0): " + result3.toString())
    
    println("Test terminé")
}