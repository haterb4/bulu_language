// Complex number implementation

export struct Complex {
    real: int64,
    imag: int64,
    
    func add(other: Complex): Complex {
        return Complex {
            real: this.real + other.real,
            imag: this.imag + other.imag
        };
    }
    
    func sub(other: Complex): Complex {
        return Complex {
            real: this.real - other.real,
            imag: this.imag - other.imag
        };
    }
    
    func mul(other: Complex): Complex {
        // (a + bi)(c + di) = (ac - bd) + (ad + bc)i
        let ac = this.real * other.real;
        let bd = this.imag * other.imag;
        let ad = this.real * other.imag;
        let bc = this.imag * other.real;
        
        return Complex {
            real: ac - bd,
            imag: ad + bc
        };
    }
    
    func magnitude(): int64 {
        // Simplified: sqrt(real^2 + imag^2)
        // For now, just return real^2 + imag^2
        return this.real * this.real + this.imag * this.imag;
    }

    func toString(): string {
        // Convert complex number to string format: (real + imag*i)
        let realStr = this.real.toString();
        let imagStr = this.imag.toString();
        return "(" + realStr + " + " + imagStr + "i)";
    }
}

// Helper functions for creating complex numbers
export func createComplex(r: int64, i: int64): Complex {
    return Complex { real: r, imag: i };
}

export func addComplex(a: Complex, b: Complex): Complex {
    return a.add(b);
}
